{"ast":null,"code":"import _regeneratorRuntime from\"/Users/shawn/Desktop/Web development/reactNew/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/shawn/Desktop/Web development/reactNew/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/shawn/Desktop/Web development/reactNew/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useEffect,useCallback,useState,useRef}from'react';var useHttpClient=function useHttpClient(){var _useState=useState(false),_useState2=_slicedToArray(_useState,2),isLoading=_useState2[0],setIsLoading=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),error=_useState4[0],setError=_useState4[1];var activeHttpRequests=useRef([]);var sendRequest=useCallback(/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(url){var method,body,headers,httpAbortCtrl,response,responseData,_args=arguments;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:method=_args.length>1&&_args[1]!==undefined?_args[1]:'GET';body=_args.length>2&&_args[2]!==undefined?_args[2]:null;headers=_args.length>3&&_args[3]!==undefined?_args[3]:{};setIsLoading(true);httpAbortCtrl=new AbortController();activeHttpRequests.current.push(httpAbortCtrl);_context.prev=6;_context.next=9;return fetch(url,{method:method,body:body,headers:headers,signal:httpAbortCtrl.signal});case 9:response=_context.sent;_context.next=12;return response.json();case 12:responseData=_context.sent;activeHttpRequests.current=activeHttpRequests.current.filter(function(reqCtrl){return reqCtrl!==httpAbortCtrl;});if(response.ok){_context.next=16;break;}throw new Error(responseData.message);case 16:;setIsLoading(false);return _context.abrupt(\"return\",responseData);case 21:_context.prev=21;_context.t0=_context[\"catch\"](6);setError(_context.t0.message);setIsLoading(false);throw _context.t0;case 26:;case 27:case\"end\":return _context.stop();}}},_callee,null,[[6,21]]);}));return function(_x){return _ref.apply(this,arguments);};}(),[]);var clearError=function clearError(){setError(null);};useEffect(function(){return function(){activeHttpRequests.current.forEach(function(abortCtrl){return abortCtrl.abort();});};},[]);return{error:error,isLoading:isLoading,sendRequest:sendRequest,clearError:clearError};};export default useHttpClient;","map":{"version":3,"names":["useEffect","useCallback","useState","useRef","useHttpClient","isLoading","setIsLoading","error","setError","activeHttpRequests","sendRequest","url","method","body","headers","httpAbortCtrl","AbortController","current","push","fetch","signal","response","json","responseData","filter","reqCtrl","ok","Error","message","clearError","forEach","abortCtrl","abort"],"sources":["/Users/shawn/Desktop/Web development/reactNew/frontend/src/shared/hooks/http-hook.js"],"sourcesContent":["import { useEffect, useCallback, useState, useRef } from 'react';\n\n\nconst useHttpClient = () => {\n  const [isLoading, setIsLoading] = useState(false);\n  const [error, setError] = useState(false);\n  const activeHttpRequests = useRef([]);\n\n  const sendRequest = useCallback(\n    async (url, method = 'GET', body = null, headers = {}) => {\n      setIsLoading(true);\n      const httpAbortCtrl = new AbortController();\n      activeHttpRequests.current.push(httpAbortCtrl);\n\n      try {\n        const response = await fetch(url, {\n          method,\n          body,\n          headers,\n          signal: httpAbortCtrl.signal\n        });\n       \n        const responseData = await response.json();\n\n        activeHttpRequests.current = activeHttpRequests.current.filter(\n          reqCtrl => reqCtrl !== httpAbortCtrl\n        );\n\n        if (!response.ok) {\n          throw new Error(responseData.message);\n        };\n        setIsLoading(false);\n        return responseData;\n      } catch (err) {\n        setError(err.message);\n        setIsLoading(false);\n        throw err;\n      };\n\n    }, []);\n\n  const clearError = () => {\n    setError(null);\n  };\n\n  useEffect(()=> {\n      return ()=> {\n        activeHttpRequests.current.forEach(abortCtrl => abortCtrl.abort())\n      };\n    }, []);\n\n\n\n  return { error, isLoading, sendRequest, clearError };\n};\n\nexport default useHttpClient;"],"mappings":"obAAA,OAASA,SAAT,CAAoBC,WAApB,CAAiCC,QAAjC,CAA2CC,MAA3C,KAAyD,OAAzD,CAGA,GAAMC,cAAa,CAAG,QAAhBA,cAAgB,EAAM,CAC1B,cAAkCF,QAAQ,CAAC,KAAD,CAA1C,wCAAOG,SAAP,eAAkBC,YAAlB,eACA,eAA0BJ,QAAQ,CAAC,KAAD,CAAlC,yCAAOK,KAAP,eAAcC,QAAd,eACA,GAAMC,mBAAkB,CAAGN,MAAM,CAAC,EAAD,CAAjC,CAEA,GAAMO,YAAW,CAAGT,WAAW,4FAC7B,iBAAOU,GAAP,gMAAYC,MAAZ,+CAAqB,KAArB,CAA4BC,IAA5B,+CAAmC,IAAnC,CAAyCC,OAAzC,+CAAmD,EAAnD,CACER,YAAY,CAAC,IAAD,CAAZ,CACMS,aAFR,CAEwB,GAAIC,gBAAJ,EAFxB,CAGEP,kBAAkB,CAACQ,OAAnB,CAA2BC,IAA3B,CAAgCH,aAAhC,EAHF,sCAM2BI,MAAK,CAACR,GAAD,CAAM,CAChCC,MAAM,CAANA,MADgC,CAEhCC,IAAI,CAAJA,IAFgC,CAGhCC,OAAO,CAAPA,OAHgC,CAIhCM,MAAM,CAAEL,aAAa,CAACK,MAJU,CAAN,CANhC,QAMUC,QANV,sCAa+BA,SAAQ,CAACC,IAAT,EAb/B,SAaUC,YAbV,eAeId,kBAAkB,CAACQ,OAAnB,CAA6BR,kBAAkB,CAACQ,OAAnB,CAA2BO,MAA3B,CAC3B,SAAAC,OAAO,QAAIA,QAAO,GAAKV,aAAhB,EADoB,CAA7B,CAfJ,GAmBSM,QAAQ,CAACK,EAnBlB,+BAoBY,IAAIC,MAAJ,CAAUJ,YAAY,CAACK,OAAvB,CApBZ,SAqBK,CACDtB,YAAY,CAAC,KAAD,CAAZ,CAtBJ,gCAuBWiB,YAvBX,4DAyBIf,QAAQ,CAAC,YAAIoB,OAAL,CAAR,CACAtB,YAAY,CAAC,KAAD,CAAZ,CA1BJ,0BA4BG,CA5BH,qEAD6B,+DA+B1B,EA/B0B,CAA/B,CAiCA,GAAMuB,WAAU,CAAG,QAAbA,WAAa,EAAM,CACvBrB,QAAQ,CAAC,IAAD,CAAR,CACD,CAFD,CAIAR,SAAS,CAAC,UAAK,CACX,MAAO,WAAK,CACVS,kBAAkB,CAACQ,OAAnB,CAA2Ba,OAA3B,CAAmC,SAAAC,SAAS,QAAIA,UAAS,CAACC,KAAV,EAAJ,EAA5C,EACD,CAFD,CAGD,CAJM,CAIJ,EAJI,CAAT,CAQA,MAAO,CAAEzB,KAAK,CAALA,KAAF,CAASF,SAAS,CAATA,SAAT,CAAoBK,WAAW,CAAXA,WAApB,CAAiCmB,UAAU,CAAVA,UAAjC,CAAP,CACD,CAnDD,CAqDA,cAAezB,cAAf"},"metadata":{},"sourceType":"module"}