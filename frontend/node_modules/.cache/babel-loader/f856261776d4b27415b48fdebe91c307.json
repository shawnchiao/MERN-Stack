{"ast":null,"code":"import _slicedToArray from\"/Users/shawn/Desktop/Web development/reactNew/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useRef,useState}from'react';import Button from'./Button';import{randomDefaultColor}from'./randomDefaultColor';import'./ImageUpload.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var ImageUpload=function ImageUpload(props){var filePickerRef=useRef();var _useState=useState(),_useState2=_slicedToArray(_useState,2),file=_useState2[0],setFile=_useState2[1];var _useState3=useState(),_useState4=_slicedToArray(_useState3,2),previewUrl=_useState4[0],setPreviewUrl=_useState4[1];var _useState5=useState(),_useState6=_slicedToArray(_useState5,2),isValid=_useState6[0],setIsValid=_useState6[1];useEffect(function(){if(file){var reader=new FileReader();reader.onloadend=function(){setPreviewUrl(reader.result);};reader.readAsDataURL(file);}},[file]);var random=function random(){var randomNumber=Math.round(1000*Math.random());var url=\"https://avatars.dicebear.com/api/avataaars/:seed\".concat(randomNumber,\".svg?background=\").concat(randomDefaultColor());setPreviewUrl(url);var randomPhoto=url;props.onInput(props.id,randomPhoto,true);};var pickImageHandler=function pickImageHandler(){filePickerRef.current.click();};var pickedHandler=function pickedHandler(event){var fileIsValid=isValid;var pickedFile;if(event.target.files&&event.target.files.length===1){setFile(event.target.files[0]);pickedFile=event.target.files[0];setIsValid(true);fileIsValid=true;}else{fileIsValid=true;setIsValid(false);}props.onInput(props.id,pickedFile,fileIsValid);};return/*#__PURE__*/_jsxs(\"div\",{className:\"form-control\",children:[/*#__PURE__*/_jsx(\"input\",{id:props.id,ref:filePickerRef,type:\"file\",style:{display:'none'},accept:\".jpg, .png, .jpeg\",onChange:pickedHandler}),/*#__PURE__*/_jsxs(\"div\",{className:\"image-upload \".concat(props.center&&\"center\"),children:[/*#__PURE__*/_jsx(\"div\",{className:\"image-upload__preview \".concat(props.circle&&\"circle\"),children:previewUrl&&/*#__PURE__*/_jsx(\"img\",{src:previewUrl,alt:\"Preview\",className:props.circle&&'circle'})}),/*#__PURE__*/_jsx(Button,{type:\"button\",onClick:pickImageHandler,children:\"PICK IMAGE\"}),props.randomButton&&/*#__PURE__*/_jsx(Button,{inverse:true,type:\"button\",onClick:random,children:\"RANDOM\"})]}),!isValid&&/*#__PURE__*/_jsx(\"p\",{children:props.errorText})]});};export default ImageUpload;","map":{"version":3,"names":["React","useEffect","useRef","useState","Button","randomDefaultColor","ImageUpload","props","filePickerRef","file","setFile","previewUrl","setPreviewUrl","isValid","setIsValid","reader","FileReader","onloadend","result","readAsDataURL","random","randomNumber","Math","round","url","randomPhoto","onInput","id","pickImageHandler","current","click","pickedHandler","event","fileIsValid","pickedFile","target","files","length","display","center","circle","randomButton","errorText"],"sources":["/Users/shawn/Desktop/Web development/reactNew/frontend/src/shared/components/FormElements/ImageUpload.js"],"sourcesContent":["import React, { useEffect, useRef, useState } from 'react';\n\nimport Button from './Button';\nimport {randomDefaultColor} from './randomDefaultColor';\nimport './ImageUpload.css';\n\nconst ImageUpload = props => {\n  const filePickerRef = useRef();\n  const [file, setFile] = useState();\n  const [previewUrl, setPreviewUrl] = useState();\n  const [isValid, setIsValid] = useState();\n\n  useEffect(() => {\n    if (file) {\n      const reader = new FileReader();\n      reader.onloadend= ()=> {\n        setPreviewUrl(reader.result);\n      } ;\n      reader.readAsDataURL(file);     \n    }\n  },[file])\n\n  const random = () => {\n    const randomNumber = Math.round(1000*Math.random());\n    const url = `https://avatars.dicebear.com/api/avataaars/:seed${randomNumber}.svg?background=${randomDefaultColor()}`\n    setPreviewUrl(url);\n    const randomPhoto = url\n    props.onInput(props.id, randomPhoto, true)\n  };\n\n  const pickImageHandler = () => {\n    filePickerRef.current.click();\n  };\n\n  const pickedHandler = (event) => {\n\n    let fileIsValid = isValid;\n    let pickedFile;\n    if (event.target.files && event.target.files.length === 1) {\n      setFile(event.target.files[0]);\n      pickedFile = event.target.files[0]\n      setIsValid(true);\n      fileIsValid = true;\n    } else {\n     fileIsValid = true;\n     setIsValid(false);\n    }\n    props.onInput(props.id, pickedFile, fileIsValid )\n  }\n\n\n  return (\n    <div className='form-control'>\n      <input\n        id={props.id}\n        ref={filePickerRef}\n        type='file'\n        style={{ display: 'none' }}\n        accept=\".jpg, .png, .jpeg\"\n        onChange={pickedHandler}\n      />\n      <div className={`image-upload ${props.center && \"center\"}`}>\n        <div className={`image-upload__preview ${props.circle && \"circle\"}`}>\n         {previewUrl && <img src={previewUrl} alt=\"Preview\" className={ props.circle && 'circle'} /> }      \n        </div>\n        <Button type=\"button\" onClick={pickImageHandler}>PICK IMAGE</Button>\n        {props.randomButton && <Button inverse  type=\"button\" onClick={random}>RANDOM</Button>}\n      </div>\n      {!isValid && <p>{props.errorText}</p>}\n    </div>\n  );\n};\n\nexport default ImageUpload;"],"mappings":"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"},"metadata":{},"sourceType":"module"}