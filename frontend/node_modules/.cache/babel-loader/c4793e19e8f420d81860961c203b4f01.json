{"ast":null,"code":"import _regeneratorRuntime from\"/Users/shawn/Desktop/Web development/reactNew/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/shawn/Desktop/Web development/reactNew/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/shawn/Desktop/Web development/reactNew/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useContext}from'react';import{AuthContext}from'../../shared/context/auth-context';import Card from'../../shared/components/UIElements/Card';import Button from'../../shared/components/FormElements/Button';import Modal from'../../shared/components/UIElements/Modal';import Map from'../../shared/components/UIElements/Map';import useHttpClient from'../../shared/hooks/http-hook';import'./PlaceItem.css';import ErrorModal from'../../shared/components/UIElements/ErrorModal';import LoadingSpinner from'../../shared/components/UIElements/LoadingSpinner';import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var PlaceItem=function PlaceItem(props){var _useState=useState(false),_useState2=_slicedToArray(_useState,2),showMap=_useState2[0],setShowMap=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),showConfirmModal=_useState4[0],setShowConfirmModal=_useState4[1];var _useHttpClient=useHttpClient(),error=_useHttpClient.error,clearError=_useHttpClient.clearError,sendRequest=_useHttpClient.sendRequest,isLoading=_useHttpClient.isLoading;var openMapHandler=function openMapHandler(){return setShowMap(true);};var closeMapHandler=function closeMapHandler(){return setShowMap(false);};var auth=useContext(AuthContext);var showDeleteWarningHandler=function showDeleteWarningHandler(){setShowConfirmModal(true);};var cancelDeleteHandler=function cancelDeleteHandler(){setShowConfirmModal(false);};var confirmDeleteHandler=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:setShowConfirmModal(false);_context.prev=1;_context.next=4;return sendRequest(\"\".concat(process.env.REACT_APP_BACKEND_URL,\"/places/\").concat(props.id),'DELETE',null,{Authorization:'Bearer '+auth.token});case 4:_context.next=9;break;case 6:_context.prev=6;_context.t0=_context[\"catch\"](1);throw error;case 9:;props.onDelete(props.id);case 11:case\"end\":return _context.stop();}}},_callee,null,[[1,6]]);}));return function confirmDeleteHandler(){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(React.Fragment,{children:[/*#__PURE__*/_jsx(ErrorModal,{error:error,onClear:clearError}),/*#__PURE__*/_jsx(Modal,{show:showMap,onCancel:closeMapHandler,header:props.address,contentClass:\"place-item__modal-content\",footerClass:\"place-item__modal-actions\",footer:/*#__PURE__*/_jsx(Button,{onClick:closeMapHandler,children:\"CLOSE\"}),children:/*#__PURE__*/_jsx(\"div\",{className:\"map-container\",children:/*#__PURE__*/_jsx(Map,{center:props.coordinates,zoom:16})})}),isLoading&&/*#__PURE__*/_jsx(LoadingSpinner,{asOverlay:true}),/*#__PURE__*/_jsx(Modal,{show:showConfirmModal,onCancel:cancelDeleteHandler,header:\"Are you sure?\",footerClass:\"place-item__modal-actions\",footer:/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Button,{inverse:true,onClick:cancelDeleteHandler,children:\" CANCEL\"}),/*#__PURE__*/_jsx(Button,{danger:true,onClick:confirmDeleteHandler,children:\" DELETE\"})]}),children:/*#__PURE__*/_jsx(\"p\",{children:\"Do you want to proceed and delete this place? Please note that it can't be undone thereafter.\"})}),/*#__PURE__*/_jsx(\"li\",{className:\"place-item\",children:/*#__PURE__*/_jsxs(Card,{className:\"place-item__content\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"place-item__image\",children:/*#__PURE__*/_jsx(\"img\",{src:props.image,alt:props.title})}),/*#__PURE__*/_jsxs(\"div\",{className:\"place-item__info\",children:[/*#__PURE__*/_jsx(\"h2\",{children:props.title}),/*#__PURE__*/_jsx(\"h3\",{children:props.address}),/*#__PURE__*/_jsx(\"p\",{children:props.description})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"place-item__actions\",children:[/*#__PURE__*/_jsx(Button,{inverse:true,onClick:openMapHandler,children:\"VIEW ON MAP\"}),auth.userId===props.creatorId&&/*#__PURE__*/_jsx(Button,{to:\"/places/\".concat(props.id),children:\"EDIT\"}),auth.userId===props.creatorId&&/*#__PURE__*/_jsx(Button,{danger:true,onClick:showDeleteWarningHandler,children:\"DELETE\"})]})]})})]});};export default PlaceItem;","map":{"version":3,"names":["React","useState","useContext","AuthContext","Card","Button","Modal","Map","useHttpClient","ErrorModal","LoadingSpinner","PlaceItem","props","showMap","setShowMap","showConfirmModal","setShowConfirmModal","error","clearError","sendRequest","isLoading","openMapHandler","closeMapHandler","auth","showDeleteWarningHandler","cancelDeleteHandler","confirmDeleteHandler","process","env","REACT_APP_BACKEND_URL","id","Authorization","token","onDelete","address","coordinates","image","title","description","userId","creatorId"],"sources":["/Users/shawn/Desktop/Web development/reactNew/frontend/src/places/components/PlaceItem.js"],"sourcesContent":["import React, { useState, useContext } from 'react';\n\n\nimport { AuthContext } from '../../shared/context/auth-context';\nimport Card from '../../shared/components/UIElements/Card';\nimport Button from '../../shared/components/FormElements/Button';\nimport Modal from '../../shared/components/UIElements/Modal';\nimport Map from '../../shared/components/UIElements/Map';\nimport useHttpClient from '../../shared/hooks/http-hook';\nimport './PlaceItem.css';\nimport ErrorModal from '../../shared/components/UIElements/ErrorModal';\nimport LoadingSpinner from '../../shared/components/UIElements/LoadingSpinner';\n\nconst PlaceItem = props => {\n  const [showMap, setShowMap] = useState(false);\n  const [showConfirmModal, setShowConfirmModal] = useState(false);\n  const { error, clearError, sendRequest, isLoading } = useHttpClient();\n\n  const openMapHandler = () => setShowMap(true);\n\n  const closeMapHandler = () => setShowMap(false);\n\n  const auth = useContext(AuthContext);\n\n  const showDeleteWarningHandler = () => {\n    setShowConfirmModal(true);\n  };\n\n  const cancelDeleteHandler = () => {\n    setShowConfirmModal(false);\n  };\n\n  const confirmDeleteHandler = async () => {\n    setShowConfirmModal(false);\n    try {\n     await sendRequest(`${process.env.REACT_APP_BACKEND_URL}/places/${props.id}`,\n      'DELETE',\n      null,\n      {Authorization: 'Bearer ' + auth.token}\n      )\n    } catch(err) {\n      throw error;\n    };\n    props.onDelete(props.id);\n  }\n\n  return (\n    <React.Fragment>\n    <ErrorModal error={error} onClear={clearError} />\n    {/* map */}\n      <Modal\n        show={showMap}\n        onCancel={closeMapHandler}\n        header={props.address}\n        contentClass=\"place-item__modal-content\"\n        footerClass=\"place-item__modal-actions\"\n        footer={<Button onClick={closeMapHandler}>CLOSE</Button>}\n      >\n        <div className=\"map-container\">\n          <Map center={props.coordinates} zoom={16} />\n        </div>\n      </Modal>\n      \n    {/* Delete */}\n      { isLoading && <LoadingSpinner asOverlay />}\n      <Modal \n        show={showConfirmModal}\n        onCancel={cancelDeleteHandler}\n        header=\"Are you sure?\" \n        footerClass=\"place-item__modal-actions\" \n        footer={\n        <>\n          <Button inverse onClick={cancelDeleteHandler}> CANCEL</Button>\n          <Button danger onClick={confirmDeleteHandler}> DELETE</Button>\n        </>\n      }>\n        <p>\n          Do you want to proceed and delete this place? Please note that it can't be undone thereafter.\n        </p>\n      </Modal>\n\n      <li className=\"place-item\">\n        <Card className=\"place-item__content\">\n          <div className=\"place-item__image\">\n            <img src={props.image} alt={props.title} />\n          </div>\n          <div className=\"place-item__info\">\n            <h2>{props.title}</h2>\n            <h3>{props.address}</h3>\n            <p>{props.description}</p>\n          </div>\n          <div className=\"place-item__actions\">\n          <Button inverse onClick={openMapHandler}>\n              VIEW ON MAP\n            </Button>\n            {auth.userId === props.creatorId && (\n              <Button to={`/places/${props.id}`}>EDIT</Button>\n            )}\n\n            {auth.userId === props.creatorId && (\n              <Button danger onClick={showDeleteWarningHandler}>\n                DELETE\n              </Button>\n            )}       \n          </div>\n        </Card>\n      </li>\n    </React.Fragment>\n  );\n};\n\nexport default PlaceItem;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}