{"ast":null,"code":"import _regeneratorRuntime from\"/Users/shawn/Desktop/Web development/reactNew/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/shawn/Desktop/Web development/reactNew/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/shawn/Desktop/Web development/reactNew/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useContext}from'react';import{useNavigate}from'react-router-dom';import Input from'../../shared/components/FormElements/Input';import Button from'../../shared/components/FormElements/Button';import{VALIDATOR_REQUIRE,VALIDATOR_MINLENGTH}from'../../shared/util/validators';import{AuthContext}from'../../shared/context/auth-context';import{useForm}from'../../shared/hooks/form-hook';import useHttpClient from'../../shared/hooks/http-hook';import LoadingSpinner from'../../shared/components/UIElements/LoadingSpinner';import ErrorModal from'../../shared/components/UIElements/ErrorModal';import ImageUpload from'../../shared/components/FormElements/ImageUpload';import'./PlaceForm.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var NewPlace=function NewPlace(){var auth=useContext(AuthContext);var _useHttpClient=useHttpClient(),isLoading=_useHttpClient.isLoading,error=_useHttpClient.error,sendRequest=_useHttpClient.sendRequest,clearError=_useHttpClient.clearError;var _useForm=useForm({title:{value:'',isValid:false},description:{value:'',isValid:false},address:{value:'',isValid:false},image:{value:null,isValid:false}},false),_useForm2=_slicedToArray(_useForm,2),formState=_useForm2[0],inputHandler=_useForm2[1];var navigate=useNavigate();var placeSubmitHandler=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(event){var formData;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:event.preventDefault();_context.prev=1;formData=new FormData();formData.append('title',formState.inputs.title.value);formData.append('description',formState.inputs.description.value);formData.append('address',formState.inputs.address.value);formData.append('creator',auth.userId);formData.append('image',formState.inputs.image.value);_context.next=10;return sendRequest(\"\".concat(process.env.REACT_APP_BACKEND_URL,\"/places\"),'POST',formData,{Authorization:'Bearer '+auth.token});case 10:navigate('/');_context.next=15;break;case 13:_context.prev=13;_context.t0=_context[\"catch\"](1);case 15:;case 16:case\"end\":return _context.stop();}}},_callee,null,[[1,13]]);}));return function placeSubmitHandler(_x){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(ErrorModal,{error:error,onClear:clearError}),isLoading&&/*#__PURE__*/_jsx(LoadingSpinner,{asOverlay:true}),/*#__PURE__*/_jsxs(\"form\",{className:\"place-form\",onSubmit:placeSubmitHandler,children:[/*#__PURE__*/_jsx(Input,{id:\"title\",element:\"input\",type:\"text\",label:\"Title\",validators:[VALIDATOR_REQUIRE()],errorText:\"Please enter a valid title.\",onInput:inputHandler}),/*#__PURE__*/_jsx(Input,{id:\"description\",element:\"textarea\",label:\"Description\",validators:[VALIDATOR_MINLENGTH(5)],errorText:\"Please enter a valid description (at least 5 characters).\",onInput:inputHandler}),/*#__PURE__*/_jsx(Input,{id:\"address\",element:\"input\",label:\"Address\",validators:[VALIDATOR_REQUIRE()],errorText:\"Please enter a valid address.\",onInput:inputHandler}),/*#__PURE__*/_jsx(ImageUpload,{id:\"image\",onInput:inputHandler,errorText:\"Please provide an image.\"}),/*#__PURE__*/_jsx(Button,{type:\"submit\",disabled:!formState.isValid,children:\"ADD PLACE\"})]})]});};export default NewPlace;","map":{"version":3,"names":["React","useContext","useNavigate","Input","Button","VALIDATOR_REQUIRE","VALIDATOR_MINLENGTH","AuthContext","useForm","useHttpClient","LoadingSpinner","ErrorModal","ImageUpload","NewPlace","auth","isLoading","error","sendRequest","clearError","title","value","isValid","description","address","image","formState","inputHandler","navigate","placeSubmitHandler","event","preventDefault","formData","FormData","append","inputs","userId","process","env","REACT_APP_BACKEND_URL","Authorization","token"],"sources":["/Users/shawn/Desktop/Web development/reactNew/frontend/src/places/pages/NewPlace.js"],"sourcesContent":["import React, { useContext } from 'react';\nimport { useNavigate } from 'react-router-dom';\n\nimport Input from '../../shared/components/FormElements/Input';\nimport Button from '../../shared/components/FormElements/Button';\nimport {\n  VALIDATOR_REQUIRE,\n  VALIDATOR_MINLENGTH\n} from '../../shared/util/validators';\nimport { AuthContext } from '../../shared/context/auth-context';\nimport { useForm } from '../../shared/hooks/form-hook';\nimport useHttpClient from '../../shared/hooks/http-hook';\nimport LoadingSpinner from '../../shared/components/UIElements/LoadingSpinner';\nimport ErrorModal from '../../shared/components/UIElements/ErrorModal';\nimport ImageUpload from '../../shared/components/FormElements/ImageUpload';\nimport './PlaceForm.css';\n\nconst NewPlace = () => {\n  const auth = useContext(AuthContext);\n  const { isLoading, error, sendRequest, clearError } = useHttpClient();\n  const [formState, inputHandler] = useForm(\n    {\n      title: {\n        value: '',\n        isValid: false\n      },\n      description: {\n        value: '',\n        isValid: false\n      },\n      address: {\n        value: '',\n        isValid: false\n      },\n      image: {\n        value: null,\n        isValid:false\n      }\n    },\n    false\n  );\n\n  const navigate = useNavigate();\n\n  const placeSubmitHandler = async event => {\n    event.preventDefault();\n    try {\n      const formData = new FormData();\n      formData.append('title', formState.inputs.title.value);\n      formData.append('description', formState.inputs.description.value);\n      formData.append('address', formState.inputs.address.value);\n      formData.append('creator', auth.userId);\n      formData.append('image', formState.inputs.image.value );  \n      await sendRequest(\n        `${process.env.REACT_APP_BACKEND_URL}/places`,\n        'POST',\n        formData,\n        {Authorization: 'Bearer ' + auth.token}\n      );\n      navigate('/');\n    } catch (err) { };\n  };\n\n  return (\n    <>\n      <ErrorModal error={error} onClear={clearError} />\n      {isLoading && <LoadingSpinner asOverlay />}\n      <form className=\"place-form\" onSubmit={placeSubmitHandler}>\n        <Input\n          id=\"title\"\n          element=\"input\"\n          type=\"text\"\n          label=\"Title\"\n          validators={[VALIDATOR_REQUIRE()]}\n          errorText=\"Please enter a valid title.\"\n          onInput={inputHandler}\n        />\n        <Input\n          id=\"description\"\n          element=\"textarea\"\n          label=\"Description\"\n          validators={[VALIDATOR_MINLENGTH(5)]}\n          errorText=\"Please enter a valid description (at least 5 characters).\"\n          onInput={inputHandler}\n        />\n        <Input\n          id=\"address\"\n          element=\"input\"\n          label=\"Address\"\n          validators={[VALIDATOR_REQUIRE()]}\n          errorText=\"Please enter a valid address.\"\n          onInput={inputHandler}\n        />\n        <ImageUpload \n          id=\"image\"\n          onInput={inputHandler}\n          errorText=\"Please provide an image.\"\n        />\n        <Button type=\"submit\" disabled={!formState.isValid}>\n          ADD PLACE\n        </Button>\n      </form>\n    </>\n  );\n};\n\nexport default NewPlace;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}